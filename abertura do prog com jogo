#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <stdbool.h>
#include <windows.h>

void gotoxy(int x,int y)
{	COORD p={x,y};
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),p);
}

int main()
{
    char jogo[4][40],opcao;
    int i,j,x=55,var=0, percentual=23,num=0,p=0,points=0, erro=0;
    bool fecha=true;
/*
    for(i=0;i<4;i++)
    {
        for(j=0;j<40;j++)
        {
            jogo[i][j]=' ';
        }
    }

    jogo[3][x]='^';*/

do
{

    while(!kbhit()&&num<=100)
    {

        gotoxy(32,7);
        printf("PROJETO");

        if(num<=100)
        {
            gotoxy(22,9);
            printf("-----------------------------");
            gotoxy(22,10);
            printf("|");
            gotoxy(22,11);
            printf("-----------------------------");
            gotoxy(50,10);
            printf("|");


            gotoxy(percentual,10);
            printf("%c",219);
            gotoxy(52,10);
            printf("%i%%",num);

            num++;
            if(num%3==0)
            {
               p++;
            }

            if(p%4==0)
            {
                percentual++;
            }



        }
        gotoxy(22,13);
        printf("Points:%i",points);

        if(opcao==' ')
        {

            gotoxy(14,15);
            printf(" ");
            gotoxy(15,15);
            printf(" ");
            gotoxy(16,15);
            printf(" ");
            gotoxy(14,16);
            printf(" ");
            gotoxy(16,16);
            printf(" ");
           /* jogo[1][5]=' ';
            jogo[2][4]=' ';
            jogo[2][5]=' ';
            jogo[2][6]=' ';
            jogo[3][4]=' ';
            jogo[3][6]=' ';
*/
            gotoxy(15,13);
            printf("%c",1);
            gotoxy(14,13);
            printf("\\");
            gotoxy(16,13);
            printf("/");
            gotoxy(14,14);
            printf("_");
            gotoxy(15,14);
            printf("|");
            gotoxy(16,14);
            printf("_");
            //jogo[0][5]=1;
            //jogo[0][4]='\\';
            //jogo[0][6]='/';
            //jogo[1][4]='_';
            //jogo[1][5]='|';
            //jogo[1][6]='_';


            if(x==15)
            {
                points++;
            }
        }
        else
        {
            gotoxy(15,13);
            printf(" ");
            gotoxy(14,13);
            printf(" ");
            gotoxy(16,13);
            printf(" ");
            gotoxy(14,14);
            printf(" ");
            gotoxy(16,14);
            printf(" ");
           /* jogo[0][5]=' ';
            jogo[0][4]=' ';
            jogo[0][6]=' ';
            jogo[1][4]=' ';
            jogo[1][5]=' ';
            jogo[1][6]=' ';*/

            gotoxy(15,14);
            printf("%c",1);
            gotoxy(14,15);
            printf("/");
            gotoxy(15,15);
            printf("|");
            gotoxy(16,15);
            printf("\\");
            gotoxy(14,16);
            printf("/");
            gotoxy(16,16);
            printf("\\");

           /* jogo[1][5]=1;
            jogo[2][4]='/';
            jogo[2][5]='|';
            jogo[2][6]='\\';
            jogo[3][4]='/';
            jogo[3][6]='\\';*/
            if(erro==0)
            {
                if(x==15||x==14||x==16)
                {
                        gotoxy(22,14);
                        printf("You hit the block. -2pts.");
                        points-=2;

                    erro++;
                }
            }


        }
        if(x<14)
        {
            erro=0;
        }
        if(x==20)
        {
            gotoxy(22,14);
            printf("                         ");
        }


        if(x>0)
        {
          x--; gotoxy(x,16); printf("^");//jogo[3][x]='^';
          gotoxy(x+1,16); printf(" ");

            //jogo[3][x+1]=' ';
        }
        if(x==12)
        { gotoxy(x,16); printf(" ");

            //jogo[3][x]=' ';
            x=55;
        }

/*
        for(i=0;i<4;i++)
        {
            for(j=0;j<40;j++)
            {
                printf("%c",jogo[i][j]);
            }
            printf("\n");
        }*/

        if(var==5)
        {
            var=0;
            opcao='a';
        }
        var++;

        Sleep(50);


    }
    if(num<100)
    {
        opcao=getch();
        var=0;
    }


}while(num<100);

    gotoxy(22,14);
    printf("O CARREGAMENTO FOI FINALIZADO. DESEJA CONTINUAR A JOGAR?(S/N)");
    opcao=getch();
    system("cls");

}
